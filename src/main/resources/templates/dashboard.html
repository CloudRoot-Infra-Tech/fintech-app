<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | FinTech</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts & Styles -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-image: url('/assets/images/dashboard-bg.jpg');
            background-size: cover;
            background-attachment: fixed;
            color: #333;
        }

        .app-header {
            background-color: #1E2A38;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
        }

        .logo {
            height: 80px;
        }

        .nav-links a {
            color: #C7A35C;
            font-weight: bold;
            margin-left: 1.5rem;
            font-size: 1.1rem;
            text-decoration: none;
        }

        .nav-links a:hover {
            color: #A9742C;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: rgba(255, 255, 255, 0.96);
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        h2.dashboard-title {
            text-align: center;
            font-size: 1.8rem;
            color: #A9742C;
            margin-bottom: 2rem;
        }

        .form-labels {
            width: 100%;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            font-weight: 600;
            color: #fff;
            background-color: #C7A35C;
            padding: 0.75rem 1rem;
            border-radius: 6px 6px 0 0;
            text-align: left;
        }

        .dashboard-form-table {
            width: 100%;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            margin: 1rem 0 2rem;
        }

        .dashboard-form-table input,
        .dashboard-form-table select {
            width: 100%;
            padding: 0.6rem;
            font-size: 0.95rem;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .dashboard-form-table button {
            grid-column: span 6;
            background-color: #C7A35C;
            color: #fff;
            font-weight: bold;
            padding: 0.75rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .dashboard-form-table button:hover {
            background-color: #A9742C;
        }

        .dashboard-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        canvas {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        @media (max-width: 768px) {
            .form-labels,
            .dashboard-form-table {
                grid-template-columns: 1fr;
            }

            .dashboard-form-table button {
                grid-column: span 1;
            }

            .nav-links {
                text-align: center;
                margin-top: 1rem;
            }

            .nav-links a {
                display: block;
                margin: 0.5rem 0;
            }

            .logo {
                height: 60px;
            }
        }
    </style>
</head>

<body>

<header class="app-header">
    <img src="/assets/images/logo-icon.png" class="logo" alt="FinTech Logo">
    <nav class="nav-links">
        <a href="/">üè† Home</a>
        <a href="/expenses/dashboard">üìà Dashboard</a>
        <a href="/expenses">üßæ Expenses</a>
        <a href="/cards/new">üí≥ Add Card</a>
    </nav>
</header>

<div class="container">
    <h2 class="dashboard-title">Monthly Expenses</h2>

    <!-- Form Headers -->
    <div class="form-labels">
        <div>Vendor</div>
        <div>Amount ($)</div>
        <div>Date</div>
        <div>Category</div>
        <div>Card</div>
        <div></div>
    </div>

    <!-- Form Inputs -->
    <form method="post" class="dashboard-form-table">
        <input type="text" name="vendor" placeholder="Vendor" required>
        <input type="number" name="amount" step="0.01" placeholder="Amount" required>
        <input type="date" name="date" required>
        <input type="text" name="category" placeholder="Category" required>
        <select name="card" required>
            <option value="">Select Credit Card</option>
            <!-- ü™™ Cards dynamically populated -->
        </select>
        <button type="submit">Add Expense</button>
    </form>

    <!-- Charts -->
    <div class="dashboard-charts">
        <canvas id="categoryChart"></canvas>
        <canvas id="vendorChart"></canvas>
        <canvas id="dailyChart"></canvas>
    </div>
</div>

<!-- Chart.js Logic -->
<script>
    const categoryLabels = [[${categoryLabels}]];
    const categoryData = [[${categoryData}]];
    const vendorLabels = [[${vendorLabels}]];
    const vendorTotals = [[${vendorTotals}]];
    const dailyLabels = [[${dailyLabels}]];
    const dailyTotals = [[${dailyTotals}]];

    const createChart = (ctxId, labels, data, label, bgColor) => {
        new Chart(document.getElementById(ctxId), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: label,
                    data: data,
                    backgroundColor: bgColor
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    };

    document.addEventListener('DOMContentLoaded', () => {
        createChart('categoryChart', categoryLabels, categoryData, 'Spending by Category', '#C7A35C');
        createChart('vendorChart', vendorLabels, vendorTotals, 'Top Vendors', '#4CAF50');
        createChart('dailyChart', dailyLabels, dailyTotals, 'Daily Spend', '#2196F3');
    });
</script>

</body>
</html>
